<!--
 ! Licensed to the Apache Software Foundation (ASF) under one
 ! or more contributor license agreements.  See the NOTICE file
 ! distributed with this work for additional information
 ! regarding copyright ownership. The ASF licenses this file
 ! to you under the Apache License, Version 2.0 (the
 ! "License"); you may not use this file except in compliance
 ! with the License. You may obtain a copy of the License at
 ! 
 !      http://www.apache.org/licenses/LICENSE-2.0
 ! 
 ! Unless required by applicable law or agreed to in writing, software
 ! distributed under the License is distributed on an "AS IS" BASIS,
 ! WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ! See the License for the specific language governing permissions and
 ! limitations under the License.
 !-->
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<title>Release Notes for org.apache.river.reggie</title>
<body text="#000000" bgcolor="#ffffff" link="#9b37cc"
      vlink="#cc1877" alink="#ffffff">
<a name="top">

<center>
<h1>Reggie<br>
v3.1.0 Release Notes</h1>
</center>
<hr>
<ul>
<h3>Description</h3>
"Reggie" is the name of the contributed Jini lookup service implementation
from Sun Microsystems. The specification for the River lookup service is 
available in <a href="../specs/html/lookup-spec.html">HTML</a>.
<p/>
The specification for Reggie is defined not only by the <i>Jini Lookup Service
Specification</i>, but also by the API documentation (generated by the 
Javadoc(TM) tool) for <a href="../api/net/jini/admin/Administrable.html">
<code>Administrable</code></a>.
<p/>


<h3>Changes since the v2.1.1 release</h3>
<li>[<a href='https://issues.apache.org/jira/browse/RIVER-225'>RIVER-225</a>] -         
NullPointerException in Reggie during destroy
</li>
<li>[<a href='https://issues.apache.org/jira/browse/RIVER-246'>RIVER-246</a>] -         
Consider adding shutdown hook so Reggie sends final multicast packet if its VM 
is terminated
</li>

<p>
    
<h3>Changes since the v2.0.1 release</h3>
<dl>
    <dt><b>Handling of Evolved Types</b></dt>
    <dd>
        Consider the case where service <code>S</code> has been deployed in a
        network, and <code>S</code> needs to be modified to implement
        a new interface.  Let's call the modified service <code>S'</code>.
        In previous versions of Reggie, a client would not find a proxy to
        <code>S'</code> when doing a lookup by the new interface unless
        the <code>S'</code> proxy class was renamed.  This version of Reggie
        allows a client to find a proxy to <code>S'</code> when doing a
        lookup by the new interface, even if the name of the proxy class has
        not been changed and there are instances of <code>S</code> already
        registered.<p/>
    </dd>
    <dt><b>Reuse of Multicast Announcements</b></dt>
    <dd>
        Reggie now reuses multicast announcements when there are no changes
        in host, port, or group information in order to minimize the expense of
        signing announcement packets in deployments that have been configured
        to use secure discovery.<p/>
    </dd>
    <dt><b>Delayed Verification of Multicast Requests</b></dt>
    <dd>
        Reggie also delays verifying signatures on multicast requests until
        it can determine that it must reply to the request.  This minimizes
        the expense of verifying signatures in deployments configured with
        secure discovery.<p/>
    </dd>
    <dt><b>Socket Connection Timeout when Replying to a Multicast
        Request</b></dt>
    <dd>
        This version of Reggie allows a deployer to specify a timeout to be
        applied when establishing a connection to the multicast response
        server of a client attempting to discover Reggie.  The timeout can
        be specified by adding a
        <a href="../api/net/jini/core/constraint/ConnectionRelativeTime.html">
        <code>ConnectionRelativeTime</code></a> constraint to Reggie's
        <code>discoveryConstraints</code>.  For information on additional
        constraints supported by Reggie, refer to
        <a href="../api/org/apache/river/reggie/package-summary.html">
        <code>Reggie's manual pages</code></a>
        <p/>
    </dd>
    <dt><b>Modifications to Reggie's Proxies</b></dt>
    <dd>
        Reggie's
        <a href="../api/net/jini/core/lookup/ServiceRegistrar.html">
        <code>ServiceRegistrar</code></a>,
        <a href="../api/net/jini/core/lookup/ServiceRegistration.html">
        <code>ServiceRegistration</code></a>,
        <a href="../api/net/jini/core/lease/Lease.html">
        <code>Lease</code></a>, and admin proxies now override
        <code>java.lang.Object.toString()</code> to facilitate debugging by
        providing additional information, like Reggie's
        <a href="../api/net/jini/core/lookup/ServiceID.html">
        <code>ServiceID</code></a> and underlying Java (TM) Remote Method
        Invocation (Java RMI) stub.<p/>
        The communication protocol used between Reggie and its main proxy
        has been modified to enable handling of evolved types.  This new
        protocol is not compatible with that of earlier releases.<p/>
    </dd>
    <dt><b>Log File Format</b></dt>
    <dd>
        The log file format used by the persistent version of Reggie in this
        release is not compatible with that of earlier releases.<p/>
    </dd>
    <dt><b>Bug Fixes</b></dt>
    <dd>
        <ul>
            <li>
                <i>4939735 - Reggie doesn't refresh self-registration on
                restart</i><br/>
                The persistent version of reggie no longer stores its
                self-registration; rather, the self-registration is recreated
                each time reggie is restarted to allow for configuration or
                export changes to be reflected in the proxy reggie registers
                with itself.
            </li>
            <li>
                <i>5002218 - Reggie should properly handle remote calls that
                arrive before initialization is complete</i><br/>
                Calls that arrive while reggie is in the process
                of initializing will now block until reggie has completed its
                initialization.  Calls that arrive after reggie has commenced
                its shutdown process will now result in a
                <code>java.rmi.NoSuchObjectException</code>.
            </li>
        </ul>
    </dd>
</dl>
<p>
<h2>Changes since the 1.2 release</h2>
<dl>
<dt><b>Reggie now supports the use of dynamic proxies as service objects 
(BugID# 4619505)</b>

<dd>Previously, registering a dynamic proxy (i.e., <CODE>java.lang.reflect.Proxy</CODE>)
 instance with Reggie could cause subsequent lookups by clients 
to return service objects of types not matching those specified in the 
corresponding lookup templates. This would usually result in <CODE>
ClassCastExceptions</CODE> when clients would attempt to cast the service 
objects to the types they expected. This problem has been fixed.
</dd>
</dt>
</dl>
<h2>Changes since the 1.1 release</h2>
<dl>
<dt><b>Reggie now provides multicast support for systems with multiple
Network Interface Cards (BugID# 4425525)</b></dt>
   <dd>Previously, when Reggie participated in the multicast discovery
   protocol as both a lookup service to be discovered, and as an
   entity that discovers other lookup services, only a single name or
   IP address could be used to configure the system to send and receive
   multicast packets through the network interface card associated with
   the given name or address. Now, a <i>list</i> of names and/or addresses
   can be used to configure the system to send and receive multicast packets
   through any (or all) of the interfaces in the system.</dd>
   
<dt><b>Unexpected cyclical registration no longer occurs (BugID# 4445441)
</b></dt>
    <dd>Previously, if a service registration lease expired (was not actively
    cancelled), the service was subsequently re-registered, and then
    Reggie was restarted, Reggie would prematurely expire the new registration
    of that service, as well as every subsequent re-registration, causing
    the service to cyclically appear and then disappear from the
    lookup service. The same problem occurred if the service registered
    and then re-registered before the original lease expired or was
    cancelled. This problem has now been fixed.</dd>
<dt><b>Lease renewals now have priority over other operations (BugID# 4485224)
</b></dt>
    <dd>Incoming lease renewals are now prioritized over other incoming
    calls. Without this, during the restart of a large system, the processing
    of new registrations could have prevented the renewal of leases for
    existing registrations, resulting in cyclical registration failures.</dd>
<dt><b>Attribute class changes are now detected (BugID# 4488084)</b></dt>
    <dd>Reggie now detects all changes in attribute classes, including field
    name and field type changes, and prevents the use of more than one
    version of an attribute class with a given name at any one time.
    Attribute classes can evolve over time; Reggie automatically purges
    information about an attribute class when no instances or templates
    are in use for the class or any of its subclasses.</dd>
</dl>
<p>

<!-- No issues for now

<p>
<H3>Known Issues (& Workarounds)</H3>
<p>

-->

</ul>
<hr>
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership. The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License. You may obtain a copy of the License at
<ul>
     <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>
</ul>
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

</body>
</html>
